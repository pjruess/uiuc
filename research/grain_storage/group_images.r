library(magick)

### COUNTY ###

# Harvest
h1 <- image_read('county_plots/total/2002_total_harvest.png')
h1 <- image_annotate(h1,'A',size=200,gravity='northwest',color='black')#,location='+50+15')
h2 <- image_read('county_plots/total/2007_total_harvest.png')
h2 <- image_annotate(h2,'B',size=200,gravity='northwest',color='black')#,location='+50+15')
h3 <- image_read('county_plots/total/2012_total_harvest.png')
h3 <- image_annotate(h3,'C',size=200,gravity='northwest',color='black')#,location='+50+15')
h1 <- image_crop(h1,'1550x1100')
h2 <- image_crop(h2,'1550x1100')
county_harv <- image_append(c(h1,h2,h3))
county_harv <- image_crop(county_harv,'5650x1000')

# Harvest
h1 <- image_read('state_plots/total/2002_total_harvest.png')
h1 <- image_annotate(h1,'D',size=200,gravity='northwest',color='black')#,location='+50+15')
h2 <- image_read('state_plots/total/2007_total_harvest.png')
h2 <- image_annotate(h2,'E',size=200,gravity='northwest',color='black')#,location='+50+15')
h3 <- image_read('state_plots/total/2012_total_harvest.png')
h3 <- image_annotate(h3,'F',size=200,gravity='northwest',color='black')#,location='+50+15')
h1 <- image_crop(h1,'1550x1100')
h2 <- image_crop(h2,'1550x1100')
state_harv <- image_append(c(h1,h2,h3))
state_harv <- image_crop(state_harv,'5650x1100')

# Combined Harvest
all_harv <- image_append(c(county_harv, state_harv),stack=TRUE)
image_write(all_harv, path = "group_images/all_harv.png", format = "png")

# Production
p1 <- image_read('county_plots/total/2002_total_production.png')
p1 <- image_annotate(p1,'A',size=200,gravity='northwest',color='black')#,location='+50+15')
p2 <- image_read('county_plots/total/2007_total_production.png')
p2 <- image_annotate(p2,'B',size=200,gravity='northwest',color='black')#,location='+50+15')
p3 <- image_read('county_plots/total/2012_total_production.png')
p3 <- image_annotate(p3,'C',size=200,gravity='northwest',color='black')#,location='+50+15')
p1 <- image_crop(p1,'1550x1100')
p2 <- image_crop(p2,'1550x1100')
county_prod <- image_append(c(p1,p2,p3))
county_prod <- image_crop(county_prod,'5650x1100')

# Production
p1 <- image_read('state_plots/total/2002_total_production.png')
p1 <- image_annotate(p1,'D',size=200,gravity='northwest',color='black')#,location='+50+15')
p2 <- image_read('state_plots/total/2007_total_production.png')
p2 <- image_annotate(p2,'E',size=200,gravity='northwest',color='black')#,location='+50+15')
p3 <- image_read('state_plots/total/2012_total_production.png')
p3 <- image_annotate(p3,'F',size=200,gravity='northwest',color='black')#,location='+50+15')
p1 <- image_crop(p1,'1550x1100')
p2 <- image_crop(p2,'1550x1100')
state_prod <- image_append(c(p1,p2,p3))
state_prod <- image_crop(state_prod,'5650x1100')

# Combined Production
all_prod <- image_append(c(county_prod, state_prod),stack=TRUE)
image_write(all_prod, path = "group_images/all_prod.png", format = "png")

# Storage
s1 <- image_read('county_plots/total/2002_total_storage.png')
s1 <- image_annotate(s1,'A',size=200,gravity='northwest',color='black')#,location='+50+15')
s2 <- image_read('county_plots/total/2007_total_storage.png')
s2 <- image_annotate(s2,'B',size=200,gravity='northwest',color='black')#,location='+50+15')
s3 <- image_read('county_plots/total/2012_total_storage.png')
s3 <- image_annotate(s3,'C',size=200,gravity='northwest',color='black')#,location='+50+15')
s1 <- image_crop(s1,'1550x1100')
s2 <- image_crop(s2,'1550x1100')
county_stor <- image_append(c(s1,s2,s3))
county_stor <- image_crop(county_stor,'5650x1100')

# Storage
s1 <- image_read('state_plots/total/2002_total_storage.png')
s1 <- image_annotate(s1,'D',size=200,gravity='northwest',color='black')#,location='+50+15')
s2 <- image_read('state_plots/total/2007_total_storage.png')
s2 <- image_annotate(s2,'E',size=200,gravity='northwest',color='black')#,location='+50+15')
s3 <- image_read('state_plots/total/2012_total_storage.png')
s3 <- image_annotate(s3,'F',size=200,gravity='northwest',color='black')#,location='+50+15')
s1 <- image_crop(s1,'1550x1100')
s2 <- image_crop(s2,'1550x1100')
state_stor <- image_append(c(s1,s2,s3))
state_stor <- image_crop(state_stor,'5650x1100')

# Storage
s1 <- image_read('vws_plots/total/2002_total_storage.png')
s1 <- image_annotate(s1,'G',size=200,gravity='northwest',color='black')#,location='+50+15')
s2 <- image_read('vws_plots/total/2007_total_storage.png')
s2 <- image_annotate(s2,'H',size=200,gravity='northwest',color='black')#,location='+50+15')
s3 <- image_read('vws_plots/total/2012_total_storage.png')
s3 <- image_annotate(s3,'I',size=200,gravity='northwest',color='black')#,location='+50+15')
s1 <- image_crop(s1,'1550x1100')
s2 <- image_crop(s2,'1550x1100')
total_stor <- image_append(c(s1,s2,s3))
total_stor <- image_crop(total_stor,'5650x1100')

# Combined storage
all_stor <- image_append(c(county_stor, state_stor, total_stor),stack=TRUE)
image_write(all_stor, path = "group_images/all_storage.png", format = "png")

# CWU
cwu1 <- image_read('county_plots/total/2012_total_cwu_irrigated.png')
cwu1 <- image_annotate(cwu1,'A',size=200,gravity='northwest',color='black')#,location='+50+15')
cwu2 <- image_read('county_plots/total/2012_total_cwu_rainfed.png')
cwu2 <- image_annotate(cwu2,'B',size=200,gravity='northwest',color='black')#,location='+50+15')
cwu3 <- image_read('county_plots/total/2012_total_cwu.png')
cwu3 <- image_annotate(cwu3,'C',size=200,gravity='northwest',color='black')#,location='+50+15')
cwu1 <- image_crop(cwu1,'1550x1100')
cwu2 <- image_crop(cwu2,'1550x1100')
county_cwu <- image_append(c(cwu1,cwu2,cwu3))
county_cwu <- image_crop(county_cwu,'5650x1100')

# CWU
cwu1 <- image_read('state_plots/total/2012_total_cwu_irrigated.png')
cwu1 <- image_annotate(cwu1,'D',size=200,gravity='northwest',color='black')#,location='+50+15')
cwu2 <- image_read('state_plots/total/2012_total_cwu_rainfed.png')
cwu2 <- image_annotate(cwu2,'E',size=200,gravity='northwest',color='black')#,location='+50+15')
cwu3 <- image_read('state_plots/total/2012_total_cwu.png')
cwu3 <- image_annotate(cwu3,'F',size=200,gravity='northwest',color='black')#,location='+50+15')
cwu1 <- image_crop(cwu1,'1550x1100')
cwu2 <- image_crop(cwu2,'1550x1100')
state_cwu <- image_append(c(cwu1,cwu2,cwu3))
state_cwu <- image_crop(state_cwu,'5650x1100')

# Combined CWU
all_cwu <- image_append(c(county_cwu, state_cwu),stack=TRUE)
image_write(all_cwu, path = "group_images/all_cwu.png", format = "png")

# County VWS results
vb1 <- image_read('county_plots/total/2002_total_vws_irrigated.png')
vb1 <- image_annotate(vb1,'A',size=200,gravity='northwest',color='black')#,location='+50+15')
vb2 <- image_read('county_plots/total/2007_total_vws_irrigated.png')
vb2 <- image_annotate(vb2,'B',size=200,gravity='northwest',color='black')#,location='+50+15')
vb3 <- image_read('county_plots/total/2012_total_vws_irrigated.png')
vb3 <- image_annotate(vb3,'C',size=200,gravity='northwest',color='black')#,location='+50+15')
vb1 <- image_crop(vb1,'1550x1100')
vb2 <- image_crop(vb2,'1550x1100')
vws_blue <- image_append(c(vb1,vb2,vb3))
vws_blue <- image_crop(vws_blue,'5650x1100')

vg1 <- image_read('county_plots/total/2002_total_vws_rainfed.png')
vg1 <- image_annotate(vg1,'D',size=200,gravity='northwest',color='black')#,location='+50+15')
vg2 <- image_read('county_plots/total/2007_total_vws_rainfed.png')
vg2 <- image_annotate(vg2,'E',size=200,gravity='northwest',color='black')#,location='+50+15')
vg3 <- image_read('county_plots/total/2012_total_vws_rainfed.png')
vg3 <- image_annotate(vg3,'F',size=200,gravity='northwest',color='black')#,location='+50+15')
vg1 <- image_crop(vg1,'1550x1100')
vg2 <- image_crop(vg2,'1550x1100')
vws_green <- image_append(c(vg1,vg2,vg3))
vws_green <- image_crop(vws_green,'5650x1100')

v1 <- image_read('county_plots/total/2002_total_vws.png')
v1 <- image_annotate(v1,'G',size=200,gravity='northwest',color='black')#,location='+50+15')
v2 <- image_read('county_plots/total/2007_total_vws.png')
v2 <- image_annotate(v2,'H',size=200,gravity='northwest',color='black')#,location='+50+15')
v3 <- image_read('county_plots/total/2012_total_vws.png')
v3 <- image_annotate(v3,'I',size=200,gravity='northwest',color='black')#,location='+50+15')
v1 <- image_crop(v1,'1550x1100')
v2 <- image_crop(v2,'1550x1100')
vws_total <- image_append(c(v1,v2,v3))
vws_total <- image_crop(vws_total,'5650x1100')

vws <- image_append(c(vws_blue, vws_green, vws_total),stack=TRUE)

image_write(vws, path = "group_images/county_vws_combined.png", format = "png")

# State VWS results
vb1 <- image_read('state_plots/total/2002_total_vws_irrigated.png')
vb1 <- image_annotate(vb1,'A',size=200,gravity='northwest',color='black')#,location='+50+15')
vb2 <- image_read('state_plots/total/2007_total_vws_irrigated.png')
vb2 <- image_annotate(vb2,'B',size=200,gravity='northwest',color='black')#,location='+50+15')
vb3 <- image_read('state_plots/total/2012_total_vws_irrigated.png')
vb3 <- image_annotate(vb3,'C',size=200,gravity='northwest',color='black')#,location='+50+15')
vb1 <- image_crop(vb1,'1550x1100')
vb2 <- image_crop(vb2,'1550x1100')
vws_blue <- image_append(c(vb1,vb2,vb3))
vws_blue <- image_crop(vws_blue,'5650x1100')

vg1 <- image_read('state_plots/total/2002_total_vws_rainfed.png')
vg1 <- image_annotate(vg1,'D',size=200,gravity='northwest',color='black')#,location='+50+15')
vg2 <- image_read('state_plots/total/2007_total_vws_rainfed.png')
vg2 <- image_annotate(vg2,'E',size=200,gravity='northwest',color='black')#,location='+50+15')
vg3 <- image_read('state_plots/total/2012_total_vws_rainfed.png')
vg3 <- image_annotate(vg3,'F',size=200,gravity='northwest',color='black')#,location='+50+15')
vg1 <- image_crop(vg1,'1550x1100')
vg2 <- image_crop(vg2,'1550x1100')
vws_green <- image_append(c(vg1,vg2,vg3))
vws_green <- image_crop(vws_green,'5650x1100')

v1 <- image_read('state_plots/total/2002_total_vws.png')
v1 <- image_annotate(v1,'G',size=200,gravity='northwest',color='black')#,location='+50+15')
v2 <- image_read('state_plots/total/2007_total_vws.png')
v2 <- image_annotate(v2,'H',size=200,gravity='northwest',color='black')#,location='+50+15')
v3 <- image_read('state_plots/total/2012_total_vws.png')
v3 <- image_annotate(v3,'I',size=200,gravity='northwest',color='black')#,location='+50+15')
v1 <- image_crop(v1,'1550x1100')
v2 <- image_crop(v2,'1550x1100')
vws_total <- image_append(c(v1,v2,v3))
vws_total <- image_crop(vws_total,'5650x1100')

vws <- image_append(c(vws_blue, vws_green, vws_total),stack=TRUE)

image_write(vws, path = "group_images/state_vws_combined.png", format = "png")

# State + County VWS results
vb1 <- image_read('vws_plots/total/2002_total_vws_irrigated.png')
vb1 <- image_annotate(vb1,'A',size=200,gravity='northwest',color='black')#,location='+50+15')
vb2 <- image_read('vws_plots/total/2007_total_vws_irrigated.png')
vb2 <- image_annotate(vb2,'B',size=200,gravity='northwest',color='black')#,location='+50+15')
vb3 <- image_read('vws_plots/total/2012_total_vws_irrigated.png')
vb3 <- image_annotate(vb3,'C',size=200,gravity='northwest',color='black')#,location='+50+15')
vb1 <- image_crop(vb1,'1550x1100')
vb2 <- image_crop(vb2,'1550x1100')
vws_blue <- image_append(c(vb1,vb2,vb3))
vws_blue <- image_crop(vws_blue,'5650x1100')

vg1 <- image_read('vws_plots/total/2002_total_vws_rainfed.png')
vg1 <- image_annotate(vg1,'D',size=200,gravity='northwest',color='black')#,location='+50+15')
vg2 <- image_read('vws_plots/total/2007_total_vws_rainfed.png')
vg2 <- image_annotate(vg2,'E',size=200,gravity='northwest',color='black')#,location='+50+15')
vg3 <- image_read('vws_plots/total/2012_total_vws_rainfed.png')
vg3 <- image_annotate(vg3,'F',size=200,gravity='northwest',color='black')#,location='+50+15')
vg1 <- image_crop(vg1,'1550x1100')
vg2 <- image_crop(vg2,'1550x1100')
vws_green <- image_append(c(vg1,vg2,vg3))
vws_green <- image_crop(vws_green,'5650x1100')

v1 <- image_read('vws_plots/total/2002_total_vws.png')
v1 <- image_annotate(v1,'G',size=200,gravity='northwest',color='black')#,location='+50+15')
v2 <- image_read('vws_plots/total/2007_total_vws.png')
v2 <- image_annotate(v2,'H',size=200,gravity='northwest',color='black')#,location='+50+15')
v3 <- image_read('vws_plots/total/2012_total_vws.png')
v3 <- image_annotate(v3,'I',size=200,gravity='northwest',color='black')#,location='+50+15')
v1 <- image_crop(v1,'1550x1100')
v2 <- image_crop(v2,'1550x1100')
vws_total <- image_append(c(v1,v2,v3))
vws_total <- image_crop(vws_total,'5650x1100')

vws <- image_append(c(vws_blue, vws_green, vws_total),stack=TRUE)

image_write(vws, path = "group_images/total_vws_combined.png", format = "png")

# Fractional VWS Contributions
fc_ir1 <- image_read('vws_plots/total/2002_total_vws_ir_fraction.png')
fc_ir1 <- image_annotate(fc_ir1,'A',size=200,gravity='northwest',color='black')#,location='+50+15')
fc_ir2 <- image_read('vws_plots/total/2007_total_vws_ir_fraction.png')
fc_ir2 <- image_annotate(fc_ir2,'B',size=200,gravity='northwest',color='black')#,location='+50+15')
fc_ir3 <- image_read('vws_plots/total/2012_total_vws_ir_fraction.png')
fc_ir3 <- image_annotate(fc_ir3,'C',size=200,gravity='northwest',color='black')#,location='+50+15')
fc_ir1 <- image_crop(fc_ir1,'1550x1100')
fc_ir2 <- image_crop(fc_ir2,'1550x1100')
fc_ir <- image_append(c(fc_ir1, fc_ir2, fc_ir3))
fc_ir <- image_crop(fc_ir,'5650x1100')

fc_rf1 <- image_read('vws_plots/total/2002_total_vws_rf_fraction.png')
fc_rf1 <- image_annotate(fc_rf1,'D',size=200,gravity='northwest',color='black')#,location='+50+15')
fc_rf2 <- image_read('vws_plots/total/2007_total_vws_rf_fraction.png')
fc_rf2 <- image_annotate(fc_rf2,'E',size=200,gravity='northwest',color='black')#,location='+50+15')
fc_rf3 <- image_read('vws_plots/total/2012_total_vws_rf_fraction.png')
fc_rf3 <- image_annotate(fc_rf3,'F',size=200,gravity='northwest',color='black')#,location='+50+15')
fc_rf1 <- image_crop(fc_rf1,'1550x1100')
fc_rf2 <- image_crop(fc_rf2,'1550x1100')
fc_rf <- image_append(c(fc_rf1, fc_rf2, fc_rf3))
fc_rf <- image_crop(fc_rf,'5650x1100')

fc <- image_append(c(fc_ir,fc_rf),stack=TRUE)

image_write(fc, path = "group_images/total_fc_combined.png", format = "png")

# Change over Time

# Harvest
hd1 <- image_read('vws_plots/total/harv_diff_2007_vs_2002.png')
hd1 <- image_annotate(hd1,'A',size=200,gravity='northwest',color='black')#,location='+50+15')
hd2 <- image_read('vws_plots/total/harv_diff_2012_vs_2007.png')
hd2 <- image_annotate(hd2,'B',size=200,gravity='northwest',color='black')#,location='+50+15')
hd3 <- image_read('vws_plots/total/harv_diff_2012_vs_2002.png')
hd3 <- image_annotate(hd3,'C',size=200,gravity='northwest',color='black')#,location='+50+15')
hd1 <- image_crop(hd1,'1550x1100')
hd2 <- image_crop(hd2,'1550x1100')
hd <- image_append(c(hd1,hd2,hd3))
hd <- image_crop(hd,'5650x1100')

# Production
pd1 <- image_read('vws_plots/total/prod_diff_2007_vs_2002.png')
pd1 <- image_annotate(pd1,'D',size=200,gravity='northwest',color='black')#,location='+50+15')
pd2 <- image_read('vws_plots/total/prod_diff_2012_vs_2007.png')
pd2 <- image_annotate(pd2,'E',size=200,gravity='northwest',color='black')#,location='+50+15')
pd3 <- image_read('vws_plots/total/prod_diff_2012_vs_2002.png')
pd3 <- image_annotate(pd3,'F',size=200,gravity='northwest',color='black')#,location='+50+15')
pd1 <- image_crop(pd1,'1550x1100')
pd2 <- image_crop(pd2,'1550x1100')
pd <- image_append(c(pd1,pd2,pd3))
pd <- image_crop(pd,'5650x1100')

# Storage
sd1 <- image_read('vws_plots/total/storage_diff_2007_vs_2002.png')
sd1 <- image_annotate(sd1,'G',size=200,gravity='northwest',color='black')#,location='+50+15')
sd2 <- image_read('vws_plots/total/storage_diff_2012_vs_2007.png')
sd2 <- image_annotate(sd2,'H',size=200,gravity='northwest',color='black')#,location='+50+15')
sd3 <- image_read('vws_plots/total/storage_diff_2012_vs_2002.png')
sd3 <- image_annotate(sd3,'I',size=200,gravity='northwest',color='black')#,location='+50+15')
sd1 <- image_crop(sd1,'1550x1100')
sd2 <- image_crop(sd2,'1550x1100')
sd <- image_append(c(sd1,sd2,sd3))
sd <- image_crop(sd,'5650x1100')

# Combined Input Differences
input_diffs <- image_append(c(hd, pd, sd),stack=TRUE)
image_write(input_diffs, path = "group_images/input_diffs.png", format = "png")

# VWS Irrigated
vi1 <- image_read('vws_plots/total/vws_ir_diff_2007_vs_2002.png')
vi1 <- image_annotate(vi1,'A',size=200,gravity='northwest',color='black')#,location='+50+15')
vi2 <- image_read('vws_plots/total/vws_ir_diff_2012_vs_2007.png')
vi2 <- image_annotate(vi2,'B',size=200,gravity='northwest',color='black')#,location='+50+15')
vi3 <- image_read('vws_plots/total/vws_ir_diff_2012_vs_2002.png')
vi3 <- image_annotate(vi3,'C',size=200,gravity='northwest',color='black')#,location='+50+15')
vi1 <- image_crop(vi1,'1550x1100')
vi2 <- image_crop(vi2,'1550x1100')
vi <- image_append(c(vi1,vi2,vi3))
vi <- image_crop(vi,'5650x1100')

# VWS Rainfed
vr1 <- image_read('vws_plots/total/vws_rf_diff_2007_vs_2002.png')
vr1 <- image_annotate(vr1,'D',size=200,gravity='northwest',color='black')#,location='+50+15')
vr2 <- image_read('vws_plots/total/vws_rf_diff_2012_vs_2007.png')
vr2 <- image_annotate(vr2,'E',size=200,gravity='northwest',color='black')#,location='+50+15')
vr3 <- image_read('vws_plots/total/vws_rf_diff_2012_vs_2002.png')
vr3 <- image_annotate(vr3,'F',size=200,gravity='northwest',color='black')#,location='+50+15')
vr1 <- image_crop(vr1,'1550x1100')
vr2 <- image_crop(vr2,'1550x1100')
vr <- image_append(c(vr1,vr2,vr3))
vr <- image_crop(vr,'5650x1100')

# VWS
vd1 <- image_read('vws_plots/total/vws_diff_2007_vs_2002.png')
vd1 <- image_annotate(vd1,'G',size=200,gravity='northwest',color='black')#,location='+50+15')
vd2 <- image_read('vws_plots/total/vws_diff_2012_vs_2007.png')
vd2 <- image_annotate(vd2,'H',size=200,gravity='northwest',color='black')#,location='+50+15')
vd3 <- image_read('vws_plots/total/vws_diff_2012_vs_2002.png')
vd3 <- image_annotate(vd3,'I',size=200,gravity='northwest',color='black')#,location='+50+15')
vd1 <- image_crop(vd1,'1550x1100')
vd2 <- image_crop(vd2,'1550x1100')
vd <- image_append(c(vd1,vd2,vd3))
vd <- image_crop(vd,'5650x1100')

diffs <- image_append(c(vi, vr, vd),stack=TRUE)

image_write(diffs, path = "group_images/vws_diffs_combined.png", format = "png")